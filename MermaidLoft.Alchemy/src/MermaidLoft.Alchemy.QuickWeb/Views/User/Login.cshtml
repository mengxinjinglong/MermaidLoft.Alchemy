@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<div class="content">
    <!-- BEGIN LOGIN FORM -->
    <form class="login-form" ng-app="LoginApp" ng-controller="userCtrl">
        <div class="form-title">
            <span class="form-title">欢迎使用，</span>
            <span class="form-subtitle">请登陆.</span>
        </div>
        <div class="alert alert-danger display-hide" ng-show="loginForm.account.$dirty && loginForm.account.$invalid">
            <button class="close" data-close="alert"></button>
            <span> Enter any username and password. </span>
        </div>
        <div class="form-group">
            <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
            <label class="control-label visible-ie8 visible-ie9">用户账号</label>
            <input ng-model="user.account" required class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="off" placeholder="用户账号" name="account" />
        </div>
        <div class="form-group">
            <label class="control-label visible-ie8 visible-ie9">登录密码</label>
            <input ng-model="user.secureCode" required class="form-control form-control-solid placeholder-no-fix" type="password" autocomplete="off" placeholder="登录密码" name="password" />
        </div>
        <div class="form-actions">
            <button ng-click="login()" class="btn red btn-block uppercase">登陆</button>
        </div>
    </form>
    <!-- END LOGIN FORM -->
</div>
    <script src="~/js/angular.min.js" asp-append-version="true"></script>
    <script>
        var app = angular.module('LoginApp', []);
        app.controller('userCtrl', function ($scope, $http) {
            $scope.login = function () {
                console.log($scope.user);
                $http({
                    method: "post",
                    data: $scope.user,//Form Data = {"id":1,"value":"hello"}
                    url: "/user/LoginOn"
                })
		        //$http.post('/user/LoginOn', $scope.user)
                    .success(function (response) {
                        console.log(response);
                        if (response.status == 0) {
                            alert('登陆成功');
                            window.location.href = '/user/index';
                        } else {
                            alert(response.message);
                        }
                    }).error(function (response) {
                        console.log('ERROR:' + response);
                        alert(response);
                    });
            }
        });
    </script>
